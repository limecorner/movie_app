(function(t){function e(e){for(var i,r,n=e[0],c=e[1],l=e[2],v=0,f=[];v<n.length;v++)r=n[v],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,n=1;n<a.length;n++){var c=a[n];0!==o[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},o={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/movie_app/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"128c":function(t,e,a){"use strict";a("3a8c")},"3a8c":function(t,e,a){},"40f8":function(t,e,a){"use strict";a("b8f9")},"42de":function(t,e,a){"use strict";a("5691")},5691:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",{staticClass:"mt-3"},[e("router-link",{staticClass:"tab mr-3",attrs:{to:"/movies"}},[t._v("Home")]),e("router-link",{staticClass:"tab",attrs:{to:"/favorite/movies"}},[t._v("Favorite")])],1),e("router-view")],1)},s=[],r=(a("4989"),a("ab8b"),{name:"App"}),n=r,c=(a("128c"),a("2877")),l=Object(c["a"])(n,o,s,!1,null,null,null),d=l.exports,v=a("8c4f"),f=function(){var t=this,e=t._self._c;return e("h1",[t._v("404 Page Not Found")])},m=[],u={},g=Object(c["a"])(u,f,m,!1,null,null,null),p=g.exports,h=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container mt-3"},[e("div",{staticClass:"row"},[t._m(0),e("select",{staticClass:"col-2 mr-1",attrs:{id:"year-area"},on:{change:function(e){return t.changeQuery(e)}}},[e("option",{attrs:{value:"",selected:""}},[t._v("年份")]),t._l(t.years,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" "+t._s(a)+" ")])}))],2),e("select",{staticClass:"col-2 mr-1",attrs:{id:"genre-area"},on:{change:function(e){return t.changeQuery(e)}}},[e("option",{attrs:{value:"",selected:""}},[t._v("類型")]),t._l(t.genres,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])}))],2),e("div",{staticClass:"col-6 col-md-4 col-lg-4"},[e("form",{staticClass:"d-flex",attrs:{id:"search-form"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control me-2",attrs:{id:"search-input",type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),e("button",{staticClass:"btn btn-outline-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.filterMoviesByMovieName(t.keyword,1)}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-magnifying-glass"}})],1)])]),e("div",{staticClass:"d-flex col-4 col-md-1 col-lg-1",attrs:{id:"control-form"}},[e("font-awesome-icon",{staticClass:"mr-3",attrs:{icon:"fa-solid fa-grip",size:"2x"},on:{click:function(e){return t.changeFormat("card-format")}}}),e("font-awesome-icon",{attrs:{icon:"fa-solid fa-list",size:"2x"},on:{click:function(e){return t.changeFormat("list-format")}}})],1)])]),"card-format"===t.currentFormat?e("div",{staticClass:"container mt-5"},[e("div",{staticClass:"row",attrs:{id:"data-panel"}},t._l(t.movies,(function(a){return e("MovieCard",{key:a.id,attrs:{item:a},on:{"after-click-more":t.afterClickMore}})})),1)]):e("div",{staticClass:"container mt-5"},[e("div",{staticClass:"list-table row align-items-center"},[e("tr",{staticClass:"col-4"},[t._v(" Name ")]),e("tr",{staticClass:"col-1"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-heart"}})],1),e("tr",{staticClass:"col-3"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-ranking-star"}})],1),e("tr",{staticClass:"col-2"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-star"}})],1),e("tr",{staticClass:"col-2"},[t._v(" More ")])]),t._l(t.movies,(function(a){return e("MovieList",{key:a.id,attrs:{item:a},on:{"after-click-more":t.afterClickMore}})}))],2),e("paginate",{attrs:{"page-count":t.totalPages,"page-range":3,"margin-pages":2,"click-handler":t.clickCallback,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-class":"page-link","next-class":"page-link","force-page":t.currentPage}}),e("MovieModal",{attrs:{item:t.item}})],1)},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-4 col-md-2 col-lg-2 d-flex align-items-center justify-content-center"},[e("h5",{staticClass:"web-title"},[t._v("速查電影")])])}],_=a("bc3a"),b=a.n(_),C=(a("caad"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-container col-6 col-md-4 col-lg-3 col-xl-2"},[e("div",{staticClass:"card mb-2"},[e("img",{staticClass:"card-img-top",attrs:{src:t.getPoster,alt:"Card image cap"}}),e("div",{staticClass:"card-body movie-item-body"},[e("h5",[t._v(t._s(t.getTitle))]),t.favoriteMoviesIdArray.includes(t.item.id)?e("font-awesome-icon",{staticClass:"favorite",attrs:{icon:"fa-solid fa-heart"},on:{click:function(e){return t.onToggleFavorite(t.item)}}}):e("font-awesome-icon",{attrs:{icon:"fa-solid fa-heart"},on:{click:function(e){return t.onToggleFavorite(t.item)}}})],1),e("div",{staticClass:"card-footer d-flex justify-content-between"},[e("div",[e("div",{staticClass:"text-left"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-ranking-star"}}),t._v(" "+t._s(t.getPopularity)+" ")],1),e("div",{staticClass:"text-left"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-star"}}),t._v(" "+t._s(t.getVote)+" ")],1)]),e("button",{staticClass:"btn btn-show-movie btn-show-movie-card-format",attrs:{"data-toggle":"modal","data-target":"#show-movie-modal"},on:{click:function(e){return t.clickMore(t.item)}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-down"}})],1)])])])}),w=[];const k="https://api.themoviedb.org/3/",M={methods:{clickMore(t){b.a.get(`${k}movie/${t.id}?api_key=70c1033d4e5a041d7597a7d9758e86a6`).then(t=>{const{data:e}=t;this.$emit("after-click-more",e)}).catch(t=>console.log(t))}}},x={computed:{getPoster(){return this.item.poster_path?"https://image.tmdb.org/t/p/w500/"+this.item.poster_path:"http://fakeimg.pl/440x650/?text=NoImg"},getTitle(){return this.item.title?this.item.title:"無資料"},getPopularity(){return this.item.popularity?this.item.popularity:"無資料"},getVote(){return this.item.vote_average?this.item.vote_average:"無資料"},getReleaseDate(){return this.item.release_date?this.item.release_date:"無資料"},getBudget(){return this.item.budget?this.item.budget:"無資料"},getRevenue(){return this.item.revenue?this.item.revenue:"無資料"},getOverview(){return this.item.overview?this.item.overview:"無資料"},getTagline(){return this.item.tagline?this.item.tagline:"無資料"}}},I="https://api.themoviedb.org/3/",O=b.a.create({baseURL:I,headers:{"Content-Type":"application/json;charset=utf-8"}});var P={mixins:[M,x],props:{item:{type:Object,required:!0}},data(){return{isFavorite:!1,favoriteMoviesIdArray:[]}},created(){this.favoriteMoviesIdArray=JSON.parse(localStorage.getItem("favorite_key"))||[]},methods:{onToggleFavorite(t){const e=!this.favoriteMoviesIdArray.includes(t.id);this.favoriteMoviesIdArray=JSON.parse(localStorage.getItem("favorite_key"))||[],e?this.favoriteMoviesIdArray.push(t.id):(this.favoriteMoviesIdArray=this.favoriteMoviesIdArray.filter(e=>e!==t.id),this.$emit("after-toggle-favorite",this.favoriteMoviesIdArray)),localStorage.setItem("favorite_key",JSON.stringify(this.favoriteMoviesIdArray));const a=I+"account/13446156/favorite?api_key=70c1033d4e5a041d7597a7d9758e86a6&session_id=df70931400331ac12bf1a79bf28dcc0973f037a4",i={media_type:"movie",media_id:t.id,favorite:e};O.post(a,i).then(t=>{console.log(t)}).catch(t=>console.log(t))}}},A=P,T=(a("bb7f"),Object(c["a"])(A,C,w,!1,null,"07865f8a",null)),j=T.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-table row align-items-center"},[e("tr",{staticClass:"col-4 pl-2"},[t._v(" "+t._s(t.getTitle)+" ")]),e("tr",{staticClass:"col-1"},[t.favoriteMoviesIdArray.includes(t.item.id)?e("font-awesome-icon",{staticClass:"favorite",attrs:{icon:"fa-solid fa-heart"},on:{click:function(e){return t.onToggleFavorite(t.item)}}}):e("font-awesome-icon",{attrs:{icon:"fa-solid fa-heart"},on:{click:function(e){return t.onToggleFavorite(t.item)}}})],1),e("tr",{staticClass:"col-3"},[t._v(" "+t._s(t.getPopularity)+" ")]),e("tr",{staticClass:"col-2"},[t._v(" "+t._s(t.getVote)+" ")]),e("tr",{staticClass:"col-2"},[e("button",{staticClass:"btn btn-show-movie btn-show-movie-list-format mx-2",attrs:{type:"button","data-toggle":"modal","data-target":"#show-movie-modal"},on:{click:function(e){return t.clickMore(t.item)}}},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-angle-down"}})],1)])])},S=[];const N="https://api.themoviedb.org/3/",$=b.a.create({baseURL:N,headers:{"Content-Type":"application/json;charset=utf-8"}});var J={mixins:[M,x],props:{item:{type:Object,required:!0}},data(){return{isFavorite:!1,favoriteMoviesIdArray:[]}},created(){this.favoriteMoviesIdArray=JSON.parse(localStorage.getItem("favorite_key"))||[]},methods:{onToggleFavorite(t){const e=!this.favoriteMoviesIdArray.includes(t.id);this.favoriteMoviesIdArray=JSON.parse(localStorage.getItem("favorite_key"))||[],e?this.favoriteMoviesIdArray.push(t.id):(this.favoriteMoviesIdArray=this.favoriteMoviesIdArray.filter(e=>e!==t.id),this.$emit("after-toggle-favorite",this.favoriteMoviesIdArray)),localStorage.setItem("favorite_key",JSON.stringify(this.favoriteMoviesIdArray));const a=N+"account/13446156/favorite?api_key=70c1033d4e5a041d7597a7d9758e86a6&session_id=df70931400331ac12bf1a79bf28dcc0973f037a4",i={media_type:"movie",media_id:t.id,favorite:e};$.post(a,i).then(t=>{console.log(t)}).catch(t=>console.log(t))}}},G=J,R=(a("40f8"),Object(c["a"])(G,F,S,!1,null,"2872d194",null)),Y=R.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal fade",attrs:{id:"show-movie-modal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body",attrs:{id:"show-movie-body"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("img",{attrs:{src:t.getPoster,id:"show-movie-image"}})]),e("div",{staticClass:"col-6"},[e("h5",{staticClass:"modal-title",attrs:{id:"show-movie-title"}},[t._v(" "+t._s(t.getTitle)+" ")]),e("p",{staticClass:"m-0"},[t._v("發行日 : "+t._s(t.getReleaseDate))]),e("div",[e("span",[t._v("類型 : ")]),t._l(t.item.genres,(function(a){return e("span",{key:a.id,staticClass:"mr-2"},[t._v(t._s(a.name?a.name:"無資料")+" ")])}))],2),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-4"},[e("div",{staticClass:"text-center"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-ranking-star"}}),t._v(" "+t._s(t.getPopularity)+" ")],1),e("div",{staticClass:"text-center"},[e("font-awesome-icon",{attrs:{icon:"fa-solid fa-star"}}),t._v(" "+t._s(t.getVote)+" ")],1)]),e("div",{staticClass:"col-8"},[e("div",[e("p",{staticClass:"text-center m-0"},[t._v(" 預算 "+t._s(t.getBudget)+" ")])]),e("div",[e("p",{staticClass:"text-center m-0"},[t._v(" 票房 "+t._s(t.getRevenue)+" ")])])])]),e("div",{staticClass:"mt-3",attrs:{id:"show-movie-description "}},[e("p",{staticClass:"overview-title text-center m-0"},[t._v("概要")]),e("p",{staticClass:"text-center"},[t._v(t._s(t.getOverview))])]),e("div",{attrs:{id:"show-movie-description"}},[e("p",{staticClass:"overview-title text-center m-0"},[t._v("標語")]),e("p",{staticClass:"text-center"},[t._v(" "+t._s(t.getTagline)+" ")])])])])])])])])},L=[],q={mixins:[x],props:{item:{type:Object,required:!0}}},z=q,V=(a("42de"),Object(c["a"])(z,B,L,!1,null,"1301d1a0",null)),D=V.exports;const Q="https://api.themoviedb.org/3/";var U={components:{MovieCard:j,MovieList:Y,MovieModal:D},data(){return{years:[],genres:[],year:"",genreId:"",movies:[],currentPage:1,item:{},totalPages:3,currentFormat:"card-format",keyword:"",filterType:"byYearAndGenre"}},created(){this.initilaizeYears(2010),this.getGenres(),this.filterMovies(1,this.year,this.genreId)},methods:{getGenres(){b.a.get(Q+"genre/movie/list",{params:{api_key:"70c1033d4e5a041d7597a7d9758e86a6"}}).then(t=>{const{data:e}=t;this.genres=e.genres}).catch(t=>console.log(t))},clickCallback(t){console.log(t),this.currentPage=t,"byYearAndGenre"===this.filterType?this.filterMovies(t,this.year,this.genreId):this.filterMoviesByMovieName(this.keyword,t)},initilaizeYears(t){for(let e=2022;e>=t;e--)this.years.push(e)},changeQuery(t){"year-area"===t.target.id?this.year=t.target.value:this.genreId=t.target.value,this.filterType="byYearAndGenre",this.currentPage=1,this.filterMovies(this.currentPage,this.year,this.genreId)},filterMovies(t,e,a){console.log({page:t,year:e,genreId:a}),b.a.get(Q+"discover/movie",{params:{api_key:"70c1033d4e5a041d7597a7d9758e86a6",sort_by:"popularity.desc",include_video:!1,page:t,primary_release_year:e,with_genres:a}}).then(e=>{const{data:a}=e;this.movies=a.results,this.totalPages=a.total_pages,this.$router.push(`/movies?year=${this.year}&genreId=${this.genreId}&page=${t}`)}).catch(t=>console.log(t))},filterMoviesByMovieName(t,e){"byYearAndGenre"===this.filterType&&(this.currentPage=1),this.filterType="byMovieName",b.a.get(Q+"search/movie",{params:{api_key:"70c1033d4e5a041d7597a7d9758e86a6",query:t,page:e}}).then(t=>{const{data:a}=t;this.movies=a.results,this.totalPages=a.total_pages,this.$router.push(`movies?keyword=${this.keyword}&page=${e}`)}).catch(t=>console.log(t))},afterClickMore(t){this.item=t},changeFormat(t){this.currentFormat=t,console.log(this.currentFormat)}}},H=U,E=(a("70ad"),Object(c["a"])(H,h,y,!1,null,"a643c53c",null)),K=E.exports,W=function(){var t=this,e=t._self._c;return e("div",["card-format"===t.currentFormat?e("div",{staticClass:"container mt-5"},[e("div",{staticClass:"row",attrs:{id:"data-panel"}},t._l(t.movies,(function(a){return e("MovieCard",{key:a.id,attrs:{item:a},on:{"after-click-more":t.afterClickMore,"after-toggle-favorite":t.afterToggleFavorite}})})),1)]):t._e(),e("MovieModal",{attrs:{item:t.item}})],1)},X=[];const Z="https://api.themoviedb.org/3/";var tt={mixins:[M,x],components:{MovieCard:j,MovieModal:D},data(){return{movies:[],item:{},currentFormat:"card-format"}},created(){this.getFavoriteMovies()},methods:{getFavoriteMovies(){b.a.get(Z+"account/13446156/favorite/movies",{params:{api_key:"70c1033d4e5a041d7597a7d9758e86a6",session_id:"df70931400331ac12bf1a79bf28dcc0973f037a4",sort_by:"created_at.desc"}}).then(t=>{const{data:e}=t;this.movies=e.results}).catch(t=>console.log(t))},afterClickMore(t){this.item=t},afterToggleFavorite(t){this.movies=this.movies.filter(e=>t.includes(e.id))}}},et=tt,at=Object(c["a"])(et,W,X,!1,null,null,null),it=at.exports;i["default"].use(v["a"]);const ot=[{path:"/",name:"movies",component:K},{path:"/movies",name:"movies",component:K},{path:"/favorite/movies",name:"favorite-movies",component:it},{path:"*",name:"not-found",component:p}],st=new v["a"]({routes:ot});var rt=st,nt=a("5f5b"),ct=a("b1e0"),lt=(a("f9e3"),a("2dd8"),a("ecee")),dt=a("ad3d"),vt=a("c074"),ft=a("b702"),mt=a("8832"),ut=a.n(mt);const gt=v["a"].prototype.push;v["a"].prototype.push=function(t){return gt.call(this,t).catch(t=>t)},i["default"].component("paginate",ut.a),i["default"].config.productionTip=!1,i["default"].use(nt["a"]),i["default"].use(ct["a"]),lt["c"].add(vt["a"],ft["a"]),i["default"].component("font-awesome-icon",dt["a"]),new i["default"]({router:rt,render:t=>t(d)}).$mount("#app")},"70ad":function(t,e,a){"use strict";a("f559")},b8f9:function(t,e,a){},bb7f:function(t,e,a){"use strict";a("bedb")},bedb:function(t,e,a){},f559:function(t,e,a){}});
//# sourceMappingURL=app.cc9b52db.js.map